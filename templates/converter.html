<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Image Converter</title>
  <style>
    body {
      background: #0b0b10;
      color: #fff;
      font-family: Inter, system-ui, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
    }

```
.box {
  width: 420px;
  background: #12121a;
  border: 1px solid #222234;
  border-radius: 14px;
  padding: 24px;
}

h1 {
  margin: 0 0 18px;
  font-size: 22px;
  font-weight: 700;
  text-align: center;
}

label {
  display: block;
  font-size: 13px;
  color: #cbd5e1;
  margin-bottom: 6px;
}

input[type="url"] {
  width: 100%;
  padding: 12px 14px;
  background: #0f0f16;
  border: 1px solid #2a2a40;
  border-radius: 10px;
  color: #fff;
  margin-bottom: 14px;
}

.row {
  display: flex;
  gap: 10px;
  margin-bottom: 14px;
  font-size: 13px;
}

.row label {
  display: flex;
  align-items: center;
  gap: 6px;
  margin: 0;
  cursor: pointer;
}

button {
  width: 100%;
  padding: 12px;
  border: none;
  border-radius: 10px;
  background: #7c5cff;
  color: #fff;
  font-weight: 600;
  cursor: pointer;
}

button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.status {
  margin-top: 14px;
  font-size: 13px;
  color: #94a3b8;
}

.preview {
  margin-top: 16px;
  display: grid;
  grid-template-columns: repeat(32, 1fr);
  gap: 1px;
  justify-content: center;
}

.pixel {
  width: 6px;
  height: 6px;
}
```

  </style>
</head>
<body>
  <div class="box">
    <h1>Image Converter</h1>

```
<label>Image URL</label>
<input id="imageUrl" type="url" placeholder="https://example.com/image.png" />

<div class="row">
  <label>
    <input type="radio" name="crop" value="true" checked />
    Smart crop
  </label>
  <label>
    <input type="radio" name="crop" value="false" />
    Stretch
  </label>
</div>

<div class="row">
  <label>
    <input type="checkbox" id="simpleMode" />
    Simple pixel mode
  </label>
</div>

<button id="convertBtn">Convert</button>

<div class="status" id="status"></div>
<div class="preview" id="preview"></div>
```

  </div>

  <script>
    const btn = document.getElementById('convertBtn');
    const statusEl = document.getElementById('status');
    const preview = document.getElementById('preview');

    btn.onclick = async () => {
      const url = document.getElementById('imageUrl').value.trim();
      const crop = document.querySelector('input[name="crop"]:checked').value;
      const simple = document.getElementById('simpleMode').checked;

      if (!url) {
        statusEl.textContent = 'Enter an image URL';
        return;
      }

      btn.disabled = true;
      statusEl.textContent = 'Processing…';
      preview.innerHTML = '';

      const api = `/convert-image?url=${encodeURIComponent(url)}&crop=${crop}${simple ? '&simple=true' : ''}`;

      try {
        const res = await fetch(api);
        const data = await res.json();

        if (!res.ok) throw new Error(data.error || 'Error');

        data.pixels.forEach(p => {
          const d = document.createElement('div');
          d.className = 'pixel';
          d.style.background = `rgb(${p.R},${p.G},${p.B})`;
          preview.appendChild(d);
        });

        statusEl.textContent = `Done • ${data.resize_method}`;
      } catch (e) {
        statusEl.textContent = e.message;
      } finally {
        btn.disabled = false;
      }
    };
  </script>

</body>
</html>
