<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Image Converter</title>
  <link rel="icon" href="https://i.imgur.com/ePueN25.png" />
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(1200px 600px at 20% 10%, #1b1635, #07070c);
      color: #fff;
      font-family: Inter, system-ui, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
    }

```
.card {
  width: 520px;
  max-width: 92vw;
  background: rgba(15, 15, 25, 0.75);
  border: 1px solid rgba(139, 92, 246, 0.25);
  border-radius: 18px;
  padding: 28px;
  box-shadow: 0 20px 60px rgba(0,0,0,.5);
  backdrop-filter: blur(14px);
}

h1 {
  margin: 0 0 20px;
  font-size: 26px;
  font-weight: 800;
  background: linear-gradient(135deg, #fff, #a78bfa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

label {
  font-size: 13px;
  color: #cbd5e1;
  display: block;
  margin-bottom: 6px;
}

input[type=url] {
  width: 100%;
  padding: 13px 15px;
  background: rgba(0,0,0,.35);
  border: 1px solid rgba(139, 92, 246, 0.35);
  border-radius: 12px;
  color: #fff;
  outline: none;
  margin-bottom: 16px;
}

.options {
  display: flex;
  gap: 14px;
  margin-bottom: 14px;
  flex-wrap: wrap;
}

.option {
  flex: 1;
  min-width: 140px;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid rgba(139, 92, 246, 0.25);
  background: rgba(0,0,0,.25);
  cursor: pointer;
  font-size: 13px;
  color: #e5e7eb;
  display: flex;
  gap: 8px;
  align-items: center;
}

.option input { accent-color: #8b5cf6; }

button {
  width: 100%;
  padding: 14px;
  border-radius: 14px;
  border: none;
  background: linear-gradient(135deg, #8b5cf6, #6366f1);
  color: #fff;
  font-weight: 700;
  cursor: pointer;
  margin-top: 6px;
}

button:disabled { opacity: .6; cursor: not-allowed; }

.status {
  margin-top: 14px;
  font-size: 13px;
  color: #a1a1aa;
}

.preview {
  margin-top: 18px;
  display: grid;
  grid-template-columns: repeat(32, 1fr);
  gap: 1px;
  justify-content: center;
  max-width: 320px;
}

.pixel {
  width: 8px;
  height: 8px;
}
```

  </style>
</head>
<body>
  <div class="card">
    <h1>Image Converter</h1>

```
<label>Image URL</label>
<input id="imageUrl" type="url" placeholder="https://example.com/image.png" />

<div class="options">
  <label class="option">
    <input type="radio" name="crop" value="true" checked /> Smart crop
  </label>
  <label class="option">
    <input type="radio" name="crop" value="false" /> Stretch
  </label>
</div>

<div class="options">
  <label class="option">
    <input type="checkbox" id="simpleMode" /> Simple pixel mode
  </label>
</div>

<button id="convertBtn">Convert</button>

<div class="status" id="status"></div>
<div class="preview" id="preview"></div>
```

  </div>

  <script>
    const btn = document.getElementById('convertBtn');
    const statusEl = document.getElementById('status');
    const preview = document.getElementById('preview');

    btn.onclick = async () => {
      const url = document.getElementById('imageUrl').value.trim();
      const crop = document.querySelector('input[name=crop]:checked').value;
      const simple = document.getElementById('simpleMode').checked;

      if (!url) {
        statusEl.textContent = 'Enter an image URL';
        return;
      }

      btn.disabled = true;
      statusEl.textContent = 'Processing…';
      preview.innerHTML = '';

      const api = `${location.origin}/convert-image?url=${encodeURIComponent(url)}&crop=${crop}${simple ? '&simple=true' : ''}`;

      try {
        const res = await fetch(api);
        const data = await res.json();
        if (!res.ok) throw new Error(data.error || 'Error');

        data.pixels.forEach(p => {
          const d = document.createElement('div');
          d.className = 'pixel';
          d.style.background = `rgb(${p.R},${p.G},${p.B})`;
          preview.appendChild(d);
        });

        statusEl.textContent = `Done • ${data.resize_method}`;
      } catch (e) {
        statusEl.textContent = e.message;
      } finally {
        btn.disabled = false;
      }
    };
  </script>

</body>
</html>
