<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title id="pageTitle">Script Details - Vadrifts</title>
<link rel="icon" href="https://i.imgur.com/ePueN25.png" type="image/png">
<script defer src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

:root {
--gradient-primary: linear-gradient(90deg, #ffffff 0%, #7209b7 100%);
--gradient-button: linear-gradient(135deg, #7209b7 0%, #ff9f43 100%);
--accent-color: #7209b7;
--accent-color-rgba: rgba(114, 9, 183, 0.9);
--box-shadow-primary: 0 10px 25px rgba(114, 9, 183, 0.35);
--box-shadow-primary-hover: 0 15px 40px rgba(114, 9, 183, 0.55);
--accent-glow: rgba(114, 9, 183, 0.5);
--particle-color: #a45cff;
}

body {
background: #000000;
color: #ffffff;
font-family: 'Inter', sans-serif;
min-height: 100vh;
overflow-x: hidden;
position: relative;
}

.bg-lights {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: 1;
overflow: hidden;
pointer-events: none;
}

.main-light {
position: absolute;
width: 1400px;
height: 1400px;
border-radius: 50%;
filter: blur(160px);
opacity: 0.35;
background: radial-gradient(circle, #6a00ff 0%, #3d008a 25%, transparent 65%);
animation: slowPulse 18s ease-in-out infinite;
transition: background 1.5s ease, opacity 1.5s ease;
}

#mainLight1 {
top: -200px;
left: -200px;
animation-delay: 0s;
}

#mainLight2 {
bottom: -300px;
right: -300px;
width: 1600px;
height: 1600px;
opacity: 0.3;
animation-delay: -9s;
}

#accentLight {
position: absolute;
width: 800px;
height: 800px;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
border-radius: 50%;
filter: blur(120px);
opacity: 0.15;
background: radial-gradient(circle, #ffffff 0%, transparent 60%);
animation: slowPulse 22s ease-in-out infinite;
animation-delay: -5s;
transition: background 1.5s ease;
}

@keyframes slowPulse {
0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.15; }
50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.25; }
}

.particles {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: 2;
pointer-events: none;
}

.particle {
position: absolute;
width: 3px;
height: 3px;
background: var(--particle-color);
border-radius: 50%;
opacity: 0.7;
box-shadow: 0 0 12px var(--particle-color), 0 0 6px var(--particle-color);
animation: floatParticle 25s linear infinite;
transition: background 1.5s ease, box-shadow 1.5s ease;
}

@keyframes floatParticle {
0% { 
transform: translateY(100vh) translateX(0) scale(0); 
opacity: 0; 
}
5% { 
opacity: 0.7; 
transform: translateY(95vh) translateX(10px) scale(1);
}
95% { 
opacity: 0.5; 
transform: translateY(5vh) translateX(60px) scale(0.8);
}
100% { 
transform: translateY(-5vh) translateX(80px) scale(0); 
opacity: 0; 
}
}

.navbar {
position: fixed;
top: 20px;
left: 50%;
transform: translateX(-50%);
z-index: 100;
background: rgba(0,0,0,0.4);
backdrop-filter: blur(20px);
border: 1px solid rgba(255,255,255,0.12);
border-radius: 20px;
padding: 24px 32px;
animation: slideInDown 0.8s ease-out;
max-width: 1000px;
width: 90%;
transition: all 0.3s ease;
}

.navbar.scrolled { top: 15px; }
.navbar.scrolled:hover { top: 20px; }

.navbar:hover {
background: rgba(0,0,0,0.65);
border-color: rgba(255,255,255,0.25);
transform: translateX(-50%) translateY(0);
}

@keyframes slideInDown {
from { opacity: 0; transform: translateX(-50%) translateY(-50px); }
to { opacity: 1; transform: translateX(-50%) translateY(0); }
}

.nav-content {
display: flex;
align-items: center;
justify-content: space-between;
height: 100%;
}

.nav-logo {
display: flex;
align-items: center;
gap: 10px;
font-size: 24px;
font-weight: 700;
background: var(--gradient-primary);
background-clip: text;
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
text-decoration: none;
transition: all 0.3s ease, background 1.5s ease;
}

.nav-logo:hover {
transform: translateY(-3px);
filter: drop-shadow(0 0 15px var(--accent-glow));
}

.nav-logo-img { width: 28px; height: 28px; flex-shrink: 0; }

.nav-links {
display: flex;
gap: 30px;
align-items: center;
height: 100%;
}

.nav-link {
color: #ccc;
text-decoration: none;
font-weight: 500;
font-size: 14px;
transition: all 0.3s ease;
padding: 8px 12px;
display: flex;
align-items: center;
height: 100%;
}

.nav-link:hover {
color: #ffffff;
text-shadow: 0 0 8px rgba(255,255,255,0.6);
}

.container {
max-width: 1000px;
margin: 0 auto;
padding: 120px 20px 40px;
position: relative;
z-index: 10;
}

.back-to-scripts {
display: inline-flex;
align-items: center;
gap: 8px;
color: #999;
text-decoration: none;
font-weight: 500;
font-size: 14px;
margin-bottom: 30px;
padding: 10px 16px;
border-radius: 10px;
background: rgba(255,255,255,0.03);
border: 1px solid rgba(255,255,255,0.06);
transition: all 0.3s ease;
}

.back-to-scripts:hover {
color: #ffffff;
background: rgba(255,255,255,0.08);
border-color: rgba(255,255,255,0.15);
transform: translateX(-5px);
}

.back-to-scripts i {
width: 16px;
height: 16px;
}

.script-header {
text-align: center;
margin-bottom: 40px;
animation: fadeInUp 1.2s ease-out;
}

@keyframes fadeInUp {
from { opacity: 0; transform: translateY(50px); }
to { opacity: 1; transform: translateY(0); }
}

.script-thumbnail {
width: 200px;
height: 150px;
object-fit: cover;
border-radius: 15px;
margin: 0 auto 20px;
box-shadow: 0 10px 40px rgba(0,0,0,0.5), 0 0 60px var(--accent-glow);
background: var(--gradient-primary);
transition: box-shadow 1.5s ease, background 1.5s ease;
}

.script-game {
font-size: 14px;
color: var(--accent-color);
font-weight: 600;
text-transform: uppercase;
letter-spacing: 1px;
margin-bottom: 10px;
transition: color 1.5s ease, text-shadow 1.5s ease;
text-shadow: 0 0 20px var(--accent-glow);
}

.script-title {
font-size: 48px;
font-weight: 800;
background: var(--gradient-primary);
background-clip: text;
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
margin-bottom: 15px;
letter-spacing: -1px;
transition: background 1.5s ease;
}

.script-description {
font-size: 18px;
color: #ccc;
line-height: 1.6;
max-width: 600px;
margin: 0 auto;
}

.script-content {
display: grid;
grid-template-columns: 1.5fr 1fr;
gap: 30px;
margin-bottom: 40px;
animation: fadeInUp 1.2s ease-out 0.6s both;
align-items: start;
}

.features-section, .script-section {
background: rgba(0,0,0,0.5);
backdrop-filter: blur(20px);
border: 1px solid rgba(255,255,255,0.08);
border-radius: 20px;
padding: 30px;
position: relative;
height: fit-content;
box-shadow: 0 8px 32px rgba(0,0,0,0.3);
}

.section-title {
font-size: 24px;
font-weight: 700;
margin-bottom: 20px;
background: var(--gradient-primary);
background-clip: text;
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
display: flex;
align-items: center;
gap: 10px;
transition: background 1.5s ease;
}

.section-title-icon { width: 24px; height: 24px; }

.features-list { list-style: none; }

.feature-item {
display: flex;
align-items: center;
gap: 12px;
padding: 12px 0;
border-bottom: 1px solid rgba(255,255,255,0.05);
color: #ccc;
}

.feature-item:last-child { border-bottom: none; }

.feature-icon { 
width: 20px; 
height: 20px;
color: var(--accent-color);
transition: color 1.5s ease, filter 1.5s ease;
filter: drop-shadow(0 0 4px var(--accent-glow));
}

.script-code-wrapper { position: relative; margin-bottom: 20px; }

.script-code {
background: rgba(0,0,0,0.7);
border: 1px solid rgba(255,255,255,0.08);
border-radius: 12px;
padding: 20px;
font-family: 'Consolas', 'Monaco', monospace;
font-size: 13px;
line-height: 1.6;
color: #e8e8e8;
white-space: pre-wrap;
overflow-x: auto;
max-height: 300px;
overflow-y: auto;
word-break: break-all;
min-height: 80px;
}

.code-copy-btn {
position: absolute;
top: 10px;
right: 10px;
background: var(--accent-color-rgba);
color: white;
border: none;
padding: 8px 12px;
border-radius: 6px;
font-size: 12px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s ease;
opacity: 0;
transform: translate(10px,-10px);
backdrop-filter: blur(10px);
}

.script-code-wrapper:hover .code-copy-btn {
opacity: 1;
transform: translate(0,0);
}

.code-copy-btn:hover {
background: var(--accent-color);
box-shadow: 0 0 20px var(--accent-glow);
}

.lua-keyword { color: #ff8c00; font-weight: 700; }
.lua-str { color: #8be9fd; }
.lua-comment { color: #6272a4; font-style: italic; }
.lua-number { color: #bd93f9; }
.lua-function { color: #50fa7b; }
.lua-boolean { color: #ffb86c; }
.lua-builtin { color: #ff8c00; font-weight: 700; }

.script-actions {
display: flex;
flex-direction: column;
gap: 12px;
margin-top: 20px;
z-index: 50;
position: relative;
}

.action-btn {
padding: 14px 20px;
border: none;
border-radius: 12px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s ease;
text-decoration: none;
text-align: center;
font-size: 14px;
position: relative;
z-index: 51;
width: 100%;
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
font-family: 'Inter', sans-serif;
}

.action-btn-icon {
width: 18px;
height: 18px;
flex-shrink: 0;
}

.copy-btn {
background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
color: white;
box-shadow: 0 10px 25px rgba(46,204,113,0.3);
}

.copy-btn:hover {
transform: translateY(-2px);
box-shadow: 0 15px 35px rgba(46,204,113,0.5);
}

.key-btn {
background: var(--gradient-button);
color: white;
box-shadow: var(--box-shadow-primary);
transition: all 0.3s ease, background 1.5s ease, box-shadow 1.5s ease;
}

.key-btn:hover {
transform: translateY(-2px);
box-shadow: var(--box-shadow-primary-hover);
}

.game-link-btn {
background: linear-gradient(135deg, #5865f2 0%, #4752c4 100%);
color: white;
box-shadow: 0 10px 25px rgba(88,101,242,0.3);
}

.game-link-btn:hover {
transform: translateY(-2px);
box-shadow: 0 15px 35px rgba(88,101,242,0.5);
}

.status-message {
position: fixed;
top: 100px;
right: 20px;
padding: 15px 20px;
border-radius: 10px;
font-weight: 600;
z-index: 200;
transform: translateX(400px);
transition: all 0.3s ease;
font-family: 'Inter', sans-serif;
}

.status-message.show {
transform: translateX(0);
}

.status-message.success {
background: rgba(46,204,113,0.9);
color: white;
border-left: 4px solid #27ae60;
}

.status-message.error {
background: rgba(231,76,60,0.9);
color: white;
border-left: 4px solid #c0392b;
}

.loading {
text-align: center;
padding: 60px 20px;
color: #888;
}

.loading-spinner {
display: inline-block;
width: 40px;
height: 40px;
border: 4px solid rgba(255,255,255,0.1);
border-radius: 50%;
border-top: 4px solid var(--accent-color);
animation: spin 1s linear infinite;
margin-bottom: 20px;
transition: border-top-color 1.5s ease;
}

@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

.error-state {
text-align: center;
padding: 60px 20px;
color: #888;
}

.error-icon {
width: 64px;
height: 64px;
margin: 0 auto 20px;
opacity: 0.5;
color: #ff6b6b;
}

.back-btn {
background: rgba(114,9,183,0.2);
color: #9c88ff;
border: 1px solid rgba(114,9,183,0.3);
padding: 10px 20px;
border-radius: 8px;
text-decoration: none;
font-weight: 600;
transition: all 0.3s ease;
display: inline-block;
font-family: 'Inter', sans-serif;
}

.back-btn:hover {
background: rgba(114,9,183,0.3);
transform: translateY(-2px);
}

@media (max-width: 768px) {
.navbar {
top: 25px;
left: 10px;
right: 10px;
width: auto;
transform: none;
padding: 16px 18px;
animation: slideInDownMobile 0.8s ease-out;
}
.navbar.scrolled { top: 20px; }
.navbar.scrolled:hover { top: 20px; }
.navbar:hover {
background: rgba(0,0,0,0.6);
border-color: rgba(255,255,255,0.4);
transform: none;
}
@keyframes slideInDownMobile {
from { opacity: 0; transform: translateY(-50px); }
to { opacity: 1; transform: translateY(0); }
}
.nav-content { justify-content: space-between; gap: 15px; }
.nav-links { gap: 15px; }
.nav-link { font-size: 12px; padding: 6px 10px; }
.nav-logo { font-size: 20px; gap: 8px; }
.nav-logo-img { width: 24px; height: 24px; }
.script-title { font-size: 32px; }
.script-content { grid-template-columns: 1fr; gap: 30px; }
.script-actions { flex-direction: column; align-items: center; }
.action-btn { width: 100%; max-width: 300px; }
.status-message { right: 10px; left: 10px; transform: translateY(-100px); }
.status-message.show { transform: translateY(0); }
.main-light {
width: 1000px;
height: 1000px;
}
#mainLight1 {
top: -100px;
left: -100px;
}
#mainLight2 {
width: 1200px;
height: 1200px;
bottom: -200px;
right: -200px;
}
#accentLight {
width: 600px;
height: 600px;
}
}

@media (max-width: 480px) {
.nav-links { gap: 10px; }
.nav-link { font-size: 11px; padding: 5px 8px; }
.navbar { left: 10px; right: 10px; padding: 10px 15px; top: 30px; }
.navbar.scrolled { top: 25px; }
.navbar.scrolled:hover { top: 25px; }
}

</style>
</head>
<body>
<svg style="display: none;">
<defs>
<linearGradient id="icon-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
<stop offset="0%" style="stop-color:#ffffff;stop-opacity:1" />
<stop offset="100%" style="stop-color:#9c88ff;stop-opacity:1" />
</linearGradient>
</defs>
</svg>
<div class="bg-lights">
<div id="mainLight1" class="main-light"></div>
<div id="mainLight2" class="main-light"></div>
<div id="accentLight"></div>
</div>
<div class="particles" id="particles"></div>
<nav class="navbar">
<div class="nav-content">
<a href="/" class="nav-logo">
<img src="https://i.imgur.com/ePueN25.png" alt="Vadrifts Logo" class="nav-logo-img">
Vadrifts
</a>
<div class="nav-links">
<a href="/scripts" class="nav-link active">Scripts</a>
<a href="/plugins" class="nav-link">Plugins</a>
</div>
</div>
</nav>
<div class="container">
<div id="loadingState" class="loading">
<div class="loading-spinner"></div>
<p>Loading script details...</p>
</div>
<div id="errorState" class="error-state" style="display: none;">
<i data-lucide="triangle-alert" class="error-icon"></i>
<h3>Script not found</h3>
<p>The script you're looking for doesn't exist or has been removed.</p>
<br>
<a href="/scripts" class="back-btn">‚Üê Back to Scripts</a>
</div>
<div id="scriptContent" style="display: none;">
<a href="/scripts" class="back-to-scripts">
<i data-lucide="arrow-left"></i>
Back to Scripts
</a>
<div class="script-header">
<img id="scriptThumbnail" class="script-thumbnail" alt="Script Thumbnail">
<div id="scriptGame" class="script-game"></div>
<h1 id="scriptTitle" class="script-title"></h1>
<p id="scriptDescription" class="script-description"></p>
</div>
<div class="script-content">
<div class="features-section">
<h2 class="section-title">
<i data-lucide="sparkles" class="section-title-icon"></i>
Features
</h2>
<ul id="featuresList" class="features-list"></ul>
</div>
<div class="script-section">
<h2 class="section-title">
<i data-lucide="scroll-text" class="section-title-icon"></i>
Script Code
</h2>
<div class="script-code-wrapper">
<div id="scriptCode" class="script-code"></div>
<button class="code-copy-btn" onclick="copyScript()">Copy</button>
</div>
<div class="script-actions">
<button class="action-btn copy-btn" onclick="copyScript()">
<i data-lucide="copy" class="action-btn-icon"></i>
Copy Script
</button>
<a id="keyLink" class="action-btn key-btn" href="#" style="cursor: pointer;">
<i data-lucide="key" class="action-btn-icon"></i>
Get Key
</a>
<button class="action-btn game-link-btn" onclick="copyGameLink()">
<i data-lucide="link" class="action-btn-icon"></i>
Copy Game Link
</button>
</div>
</div>
</div>
</div>
</div>
<div id="statusMessage" class="status-message"></div>
<script>
let currentScript = null;
let currentScriptId = null;

function initLucideIcons() {
if (window.lucide && lucide.createIcons) {
lucide.createIcons();
} else {
setTimeout(initLucideIcons, 50);
}
}

function createParticles() {
const particlesContainer = document.getElementById('particles');
const particleCount = 25;
for (let i = 0; i < particleCount; i++) {
const particle = document.createElement('div');
particle.className = 'particle';
particle.style.left = Math.random() * 100 + '%';
particle.style.animationDelay = -Math.random() * 25 + 's';
particle.style.animationDuration = (20 + Math.random() * 10) + 's';
const size = 2 + Math.random() * 3;
particle.style.width = size + 'px';
particle.style.height = size + 'px';
particlesContainer.appendChild(particle);
}
}

function highlightLua(code) {
if (!code) return '';
const keywords = /\b(local|function|end|if|then|else|elseif|for|while|do|repeat|until|return|break|in)\b/g;
const builtins = /\b(game|workspace|script|wait|print|warn|error|spawn|loadstring|getfenv|setfenv|require|pairs|ipairs|next|tostring|tonumber|type|pcall|xpcall|assert|Vector3|CFrame|Instance|Color3|UDim2|math|string|table|coroutine|os)\b/g;
const numbers = /\b(\d+\.?\d*)\b/g;
const booleans = /\b(true|false|null|nil)\b/g;
const funcNameBeforeParen = /\b([A-Za-z_]\w*)\s*(?=\()/g;
let escaped = code
.replace(/&/g, '&amp;')
.replace(/</g, '&lt;')
.replace(/>/g, '&gt;');
const strings = [];
const comments = [];
escaped = escaped.replace(/(["'])(?:(?=(\\?))\2.)*?\1/g, (m) => {
const idx = strings.length;
strings.push(m);
return `@@STR${idx}@@`;
});
escaped = escaped.replace(/(--.*$)/gm, (m) => {
const idx = comments.length;
comments.push(m);
return `@@CMT${idx}@@`;
});
let highlighted = escaped
.replace(keywords, '<span class="lua-keyword">$&</span>')
.replace(builtins, '<span class="lua-builtin">$&</span>')
.replace(booleans, '<span class="lua-boolean">$&</span>')
.replace(numbers, '<span class="lua-number">$&</span>')
.replace(funcNameBeforeParen, '<span class="lua-function">$1</span>');
highlighted = highlighted.replace(/@@CMT(\d+)@@/g, (m, n) => {
const txt = comments[Number(n)];
return `<span class="lua-comment">${txt}</span>`;
});
highlighted = highlighted.replace(/@@STR(\d+)@@/g, (m, n) => {
const txt = strings[Number(n)];
return `<span class="lua-str">${txt}</span>`;
});
return highlighted;
}

function getScriptIdFromURL() {
const pathParts = window.location.pathname.split('/');
const scriptId = pathParts[pathParts.length - 1];
return scriptId;
}

async function loadScript() {
const scriptId = getScriptIdFromURL();
currentScriptId = scriptId;
try {
const response = await fetch(`/api/scripts/${scriptId}`);
if (!response.ok) {
throw new Error('Script not found');
}
currentScript = await response.json();
displayScript(currentScript);
} catch (error) {
showError();
}
}

function displayScript(script) {
document.getElementById('loadingState').style.display = 'none';
document.getElementById('scriptContent').style.display = 'block';
document.getElementById('pageTitle').textContent = `${script.title} - Vadrifts`;
document.getElementById('scriptThumbnail').src = script.thumbnail || '';
document.getElementById('scriptThumbnail').alt = script.title || 'Thumbnail';
document.getElementById('scriptGame').textContent = script.game || '';
document.getElementById('scriptTitle').textContent = script.title || '';
document.getElementById('scriptDescription').textContent = script.description || '';
const scriptCodeEl = document.getElementById('scriptCode');
scriptCodeEl.innerHTML = highlightLua(script.script || '');
const keyButton = document.getElementById('keyLink');
if (script.key_type === 'no-key') {
keyButton.style.display = 'none';
} else if (script.key_type === 'discord') {
keyButton.style.display = 'flex';
keyButton.onclick = (e) => {
e.preventDefault();
window.open(script.key_link, '_blank');
};
} else {
keyButton.style.display = 'flex';
keyButton.onclick = (e) => {
e.preventDefault();
goToKeySystem();
};
}
const featuresList = document.getElementById('featuresList');
featuresList.innerHTML = (script.features || []).map(feature => `
<li class="feature-item">
<i data-lucide="badge-check" class="feature-icon"></i>
<span>${feature}</span>
</li>
`).join('');
initLucideIcons();
setTimeout(() => {
extractAndApplyColors(script.thumbnail);
}, 300);
}

function goToKeySystem() {
if (!currentScriptId) {
return;
}
if (currentScript && currentScript.key_type === 'discord') {
window.open(currentScript.key_link, '_blank');
} else {
const keySystemUrl = `/key-system?script=${currentScriptId}`;
window.location.href = keySystemUrl;
}
}

function showError() {
document.getElementById('loadingState').style.display = 'none';
document.getElementById('errorState').style.display = 'block';
initLucideIcons();
}

function copyScript() {
if (!currentScript) return;
navigator.clipboard.writeText(currentScript.script).then(() => {
showStatus('Script copied to clipboard!', 'success');
}).catch(err => {
showStatus('Failed to copy script', 'error');
});
}

function copyGameLink() {
if (!currentScript) return;
const gameLink = currentScript.game_link || 'https://www.roblox.com/games';
navigator.clipboard.writeText(gameLink).then(() => {
showStatus('Game link copied to clipboard!', 'success');
}).catch(err => {
showStatus('Failed to copy game link', 'error');
});
}

function showStatus(message, type) {
const statusEl = document.getElementById('statusMessage');
statusEl.textContent = message;
statusEl.className = `status-message ${type}`;
statusEl.classList.add('show');
setTimeout(() => {
statusEl.classList.remove('show');
}, 3000);
}

function rgbToHex(r, g, b) {
return '#' + [r, g, b].map(x => {
const hex = x.toString(16);
return hex.length === 1 ? '0' + hex : hex;
}).join('');
}

function hexToRgb(hex) {
const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
return result ? {
r: parseInt(result[1], 16),
g: parseInt(result[2], 16),
b: parseInt(result[3], 16)
} : null;
}

function adjustColor(hex, percent) {
const rgb = hexToRgb(hex);
if (!rgb) return hex;
const adjust = (color) => {
const adjusted = color + Math.round((255 - color) * (percent / 100));
return Math.min(255, Math.max(0, adjusted));
};
return rgbToHex(adjust(rgb.r), adjust(rgb.g), adjust(rgb.b));
}

function extractAndApplyColors(imageUrl) {
const img = new Image();
img.crossOrigin = 'Anonymous';
img.src = imageUrl || '';
img.onload = () => {
const canvas = document.createElement('canvas');
const size = 120;
canvas.width = size;
canvas.height = size;
const ctx = canvas.getContext('2d');
ctx.drawImage(img, 0, 0, size, size);
const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
const pixels = imageData.data;
const colorMap = {};
const skip = 10;
for (let i = 0; i < pixels.length; i += skip * 4) {
const r = pixels[i];
const g = pixels[i + 1];
const b = pixels[i + 2];
const brightness = (r * 0.299 + g * 0.587 + b * 0.114);
if (brightness < 25 || brightness > 235) continue;
const saturation = Math.max(r, g, b) - Math.min(r, g, b);
if (saturation < 15) continue;
const key = `${Math.floor(r / 25) * 25},${Math.floor(g / 25) * 25},${Math.floor(b / 25) * 25}`;
colorMap[key] = (colorMap[key] || 0) + 1;
}
const sortedColors = Object.entries(colorMap)
.sort((a, b) => b[1] - a[1])
.slice(0, 3)
.map(entry => {
const parts = entry[0].split(',').map(Number);
return rgbToHex(parts[0], parts[1], parts[2]);
});
if (sortedColors.length >= 2) {
applyColorScheme(sortedColors[0], sortedColors[1]);
} else if (sortedColors.length === 1) {
const color2 = adjustColor(sortedColors[0], 25);
applyColorScheme(sortedColors[0], color2);
} else {
applyColorScheme('#7209b7', '#9c88ff');
}
};
img.onerror = () => {
applyColorScheme('#7209b7', '#9c88ff');
};
}

function applyColorScheme(color1, color2) {
const root = document.documentElement;
const light1 = document.getElementById('mainLight1');
const light2 = document.getElementById('mainLight2');
const accentLight = document.getElementById('accentLight');
light1.style.background = `radial-gradient(circle, ${color1} 0%, ${color1}cc 15%, ${color1}88 30%, ${color1}44 50%, transparent 65%)`;
light2.style.background = `radial-gradient(circle, ${color2} 0%, ${color2}cc 15%, ${color2}88 30%, ${color2}44 50%, transparent 65%)`;
accentLight.style.background = `radial-gradient(circle, ${color1}33 0%, ${color2}22 40%, transparent 60%)`;
const gradient = `linear-gradient(90deg, #ffffff 0%, ${color1} 50%, ${color2} 100%)`;
const gradientButton = `linear-gradient(135deg, ${color1} 0%, ${color2} 100%)`;
root.style.setProperty('--gradient-primary', gradient);
root.style.setProperty('--gradient-button', gradientButton);
root.style.setProperty('--accent-color', color1);
const rgb1 = hexToRgb(color1);
const rgb2 = hexToRgb(color2);
if (rgb1) {
root.style.setProperty('--accent-color-rgba', `rgba(${rgb1.r}, ${rgb1.g}, ${rgb1.b}, 0.9)`);
root.style.setProperty('--box-shadow-primary', `0 10px 25px rgba(${rgb1.r}, ${rgb1.g}, ${rgb1.b}, 0.35)`);
root.style.setProperty('--box-shadow-primary-hover', `0 15px 40px rgba(${rgb1.r}, ${rgb1.g}, ${rgb1.b}, 0.55)`);
root.style.setProperty('--accent-glow', `rgba(${rgb1.r}, ${rgb1.g}, ${rgb1.b}, 0.5)`);
}
const particles = document.querySelectorAll('.particle');
particles.forEach((particle, index) => {
const particleColor = index % 2 === 0 ? color1 : color2;
particle.style.setProperty('--particle-color', particleColor);
particle.style.background = particleColor;
particle.style.boxShadow = `0 0 12px ${particleColor}, 0 0 6px ${particleColor}`;
});
}

let lastScrollTop = 0;
window.addEventListener('scroll', function() {
let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
const navbar = document.querySelector('.navbar');
if (scrollTop > 100) {
navbar.classList.add('scrolled');
} else {
navbar.classList.remove('scrolled');
}
lastScrollTop = scrollTop;
});

createParticles();
window.addEventListener('load', () => {
loadScript();
initLucideIcons();
});
</script>
</body>
</html>
